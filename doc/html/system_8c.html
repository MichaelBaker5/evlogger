<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>EV Logger: /home/jon/projects/evlogger/evlogger/src/system.c File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">EV Logger
   
   </div>
   <div id="projectbrief">AMSP430baseddataloggerforanelectricvehicle</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">/home/jon/projects/evlogger/evlogger/src/system.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;in430.h&gt;</code><br/>
<code>#include &quot;HAL_PMM.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="system_8h_source.html">system.h</a>&quot;</code><br/>
</div><table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#a78ab77b57cf2e00089f0a3a22508524c">clock_init</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Use timer A0 to set up a system clock ticking at 1ms intervals.  <a href="#a78ab77b57cf2e00089f0a3a22508524c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#a02fbef4ca042a3a926a687e81ddf3b61">sys_clock_init</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set up the system core clock source as the digitally controlled oscillator (DCO) and have the FLL stabilise the DCO at 25MHz with reference to the external high speed crystal XT2, which is 4MHz on the MSP-EXP430 board.  <a href="#a02fbef4ca042a3a926a687e81ddf3b61"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="system_8h.html#a6e6c13e871b82d881a01d1bc8df69d23">clock_time_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#ae5b7160f2e653725ba5e2024c3cb7bff">clock_time</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the current system time.  <a href="#ae5b7160f2e653725ba5e2024c3cb7bff"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#ab3527620075d7c9b9ed0b023eb47fabb">_delay_ms</a> (<a class="el" href="system_8h.html#a6e6c13e871b82d881a01d1bc8df69d23">clock_time_t</a> delay)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Delay for the provided number of milliseconds.  <a href="#ab3527620075d7c9b9ed0b023eb47fabb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#a95ca0893fea824b3da8940f52f5ac1b0">interrupt</a> (TIMER0_A0_VECTOR)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Interrupt service routine for the system ticks counter.  <a href="#a95ca0893fea824b3da8940f52f5ac1b0"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile <a class="el" href="system_8h.html#a6e6c13e871b82d881a01d1bc8df69d23">clock_time_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#ac2c5ac92059be67724d7a2185eaa467c">ticks</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">EV Datalogger Project.  <a href="#ac2c5ac92059be67724d7a2185eaa467c"></a><br/></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ab3527620075d7c9b9ed0b023eb47fabb"></a><!-- doxytag: member="system.c::_delay_ms" ref="ab3527620075d7c9b9ed0b023eb47fabb" args="(clock_time_t delay)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="system_8h.html#a60484578223bab4621fb34d9666e1133">_delay_ms</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="system_8h.html#a6e6c13e871b82d881a01d1bc8df69d23">clock_time_t</a>&#160;</td>
          <td class="paramname"><em>delay</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Delay for the provided number of milliseconds. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">delay</td><td>The number of ms to delay. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a78ab77b57cf2e00089f0a3a22508524c"></a><!-- doxytag: member="system.c::clock_init" ref="a78ab77b57cf2e00089f0a3a22508524c" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="system_8h.html#a78ab77b57cf2e00089f0a3a22508524c">clock_init</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Use timer A0 to set up a system clock ticking at 1ms intervals. </p>

</div>
</div>
<a class="anchor" id="ae5b7160f2e653725ba5e2024c3cb7bff"></a><!-- doxytag: member="system.c::clock_time" ref="ae5b7160f2e653725ba5e2024c3cb7bff" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="system_8h.html#a6e6c13e871b82d881a01d1bc8df69d23">clock_time_t</a> <a class="el" href="system_8h.html#ae5b7160f2e653725ba5e2024c3cb7bff">clock_time</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the current system time. </p>

</div>
</div>
<a class="anchor" id="a95ca0893fea824b3da8940f52f5ac1b0"></a><!-- doxytag: member="system.c::interrupt" ref="a95ca0893fea824b3da8940f52f5ac1b0" args="(TIMER0_A0_VECTOR)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="system_8c.html#a95ca0893fea824b3da8940f52f5ac1b0">interrupt</a> </td>
          <td>(</td>
          <td class="paramtype">TIMER0_A0_VECTOR&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Interrupt service routine for the system ticks counter. </p>
<p>the <a class="el" href="group__HAL__Cma3000.html#gac61bc22c3bb5b6ef2292d1e11e026861" title="Interrupt when the DMA controller has finished receiving new data from the accelerometer.">interrupt()</a> macro is from legacymsp430.h </p>

</div>
</div>
<a class="anchor" id="a02fbef4ca042a3a926a687e81ddf3b61"></a><!-- doxytag: member="system.c::sys_clock_init" ref="a02fbef4ca042a3a926a687e81ddf3b61" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="system_8h.html#a02fbef4ca042a3a926a687e81ddf3b61">sys_clock_init</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set up the system core clock source as the digitally controlled oscillator (DCO) and have the FLL stabilise the DCO at 25MHz with reference to the external high speed crystal XT2, which is 4MHz on the MSP-EXP430 board. </p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ac2c5ac92059be67724d7a2185eaa467c"></a><!-- doxytag: member="system.c::ticks" ref="ac2c5ac92059be67724d7a2185eaa467c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile <a class="el" href="system_8h.html#a6e6c13e871b82d881a01d1bc8df69d23">clock_time_t</a> <a class="el" href="system_8c.html#ac2c5ac92059be67724d7a2185eaa467c">ticks</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>EV Datalogger Project. </p>
<p>Jon Sowman 2014 &lt;<a href="mailto:js39g13@soton.ac.uk">js39g13@soton.ac.uk</a>&gt; University of Southampton </p>

</div>
</div>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Mon Mar 3 2014 09:29:19 for EV Logger by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
